<div class="app-container" *ngIf="(uiStateStore.routeQueryParams$ | async) as routeQueryParams">
  <mat-card style="margin-bottom: 30px;">
    <mat-card-title>Issues and Pull Requests</mat-card-title>
    <mat-card *ngIf="(uiStateStore.uiState$ | async) as uiState">
        {{ routeQueryParams.params | json }}
      <mat-progress-bar *ngIf="uiState.actionOngoing" mode="indeterminate"></mat-progress-bar>
      <mat-table #table matSort (matSortChange)="onSortData($event)" [dataSource]="issues" *ngIf="(issuesStore.issues$ | async) as issues">
        <ng-container matColumnDef="number">
          <mat-header-cell *matHeaderCellDef mat-sort-header> Number </mat-header-cell>
          <mat-cell *matCellDef="let issue"> {{issue.number}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="user">
          <mat-header-cell *matHeaderCellDef mat-sort-header> User </mat-header-cell>
          <mat-cell *matCellDef="let issue"> {{issue.user.login}} </mat-cell>
        </ng-container>
    
        <ng-container matColumnDef="title">
          <mat-header-cell *matHeaderCellDef mat-sort-header> Title </mat-header-cell>
          <mat-cell *matCellDef="let issue"> {{issue.title}} </mat-cell>
        </ng-container>
    
        <ng-container matColumnDef="created">
          <mat-header-cell *matHeaderCellDef mat-sort-header> Created </mat-header-cell>
          <mat-cell *matCellDef="let issue"> {{issue.created_at | date}} </mat-cell>
        </ng-container>
    
        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumns;" [ngClass]="{'loading' : uiState.actionOngoing}"></mat-row>
    
      </mat-table>
    
      <mat-paginator *ngIf="(issuesStore.issuesCount$ | async) as issuesCount"
        (page)="onPageChange($event)"
        [length]="issuesCount"
        [pageIndex]="routeQueryParams.params.page - 1"
        [pageSize]="'10'">
      </mat-paginator>
    
    </mat-card>
  </mat-card>
</div>
